<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>What does Predbat do? - Predbat Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "What does Predbat do?";
        var mkdocs_page_input_path = "what-does-predbat-do.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Predbat Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Introduction</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">What does Predbat do?</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#terminology">Terminology</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#basic-terminology">Basic terminology</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#predbat-modes">Predbat modes</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#predbat-status">Predbat status</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../caution/">Words of caution</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Installing & configuring Predbat</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../installation-summary/">Install summary</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../install/">Install details</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../inverter-setup/">Inverter setup</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../apps-yaml/">apps.yaml settings</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../energy-rates/">Energy rates</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../components/">Predbat Components</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../load-ml/">ML Load Prediction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../car-charging/">Car charging</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../configuration-guide/">Configuration guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../customisation/">Customisation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../video-guides/">Video Guides</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../faq/">FAQ</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../devices/">Support 3rd party devices/integrations</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../manual-api/">Manual API</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Viewing Predbat data</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../output-data/">Output data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../web-interface/">Web Interface</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../predbat-plan-card/">Predbat Plan card</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../creating-charts/">Creating the charts</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../compare/">Comparing Energy Tariffs</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Predbat development</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../todo-list/">To-do list</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../developing/">Developing on Predbat</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../rest_api/">Predbat REST API</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../plugins/">ðŸš€ Feature: Plugin System Implementation</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Predheat</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../predheat/">Predheat</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Predbat Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">What does Predbat do?</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="what-does-predbat-do">What does Predbat do?</h1>
<p>Predbat is a home battery automation program.</p>
<p>It runs every 5 minutes and, by default, forecasts 48 hours ahead (configurable via forecast_hours),
with the plan typically covering at least 24 hours after the first charge slot (forecast_plan_hours).</p>
<p>Predbat will automatically decide when to charge and discharge your battery to achieve the best (lowest) cost spend within the parameters you have set.
It uses the solar production forecast from Solcast combined with your historical energy usage to make this prediction.</p>
<ul>
<li>The output is a prediction of the battery levels, solar generation, house load, charging activity, discharging activity, costs and import and export amounts based on (by default) 30-minute slots.</li>
<li>Costs are based on energy pricing data, either manually configured (e.g. 7p from 11pm-4pm and 35p otherwise) or by using the Octopus Energy integration<ul>
<li>Both import and export rates are supported.</li>
<li>Intelligent Octopus is also supported and takes into account allocated charging slots.  </li>
</ul>
</li>
<li>The solar forecast used is the central scenario from Solcast/Forecast.solar (50%) with a configurable weighting towards the more pessimistic (10%) scenario.</li>
<li>Predbat automatically programs your inverter with the appropriate charging and discharging controls. Both Hybrid inverters and AC-coupled inverters are supported by Predbat.</li>
<li>Automatic planning of export slots is also supported, when enabled Predbat can start a forced discharge of the battery if the export rates are high and you have spare capacity.</li>
<li>Historical load data is used to predict your consumption, optionally car charging load can be filtered out of this data.</li>
<li>Predbat can be configured to manage the charging of your EV or to use a Solar Diverter, and take into account these loads on the house during these periods.</li>
<li>Multiple inverter support is included but depends on all inverters running in lockstep.</li>
</ul>
<h2 id="terminology">Terminology</h2>
<h3 id="basic-terminology">Basic terminology</h3>
<ul>
<li><strong>SoC</strong> - State of Charge - the % or kWh level of charge of your battery</li>
<li><strong>Target SoC</strong> - The target level that the battery is being charged to, e.g. we target 100% SoC means the battery is being charged to full</li>
<li><strong>Charge Limit</strong> - Another word for Target SoC</li>
<li><strong>Load</strong> - The energy your home is using to power your equipment e.g. oven, lights or electric car charging</li>
<li><strong>Grid</strong> - Your electric supply outside the house</li>
<li><strong>Import</strong> - Electricity drawn from the grid to be used in the home or to charge the battery</li>
<li><strong>Export</strong> - Electricity from your home from the battery or solar which is sent to the grid</li>
<li><strong>Demand</strong> - Demand Mode is when the battery covers the house load and charges from solar, to avoid importing or exporting (some systems call this ECO Mode).</li>
<li><strong>Charging</strong> - When your battery is charging, in Predbat this refers to force charge (from the grid).</li>
<li><strong>Discharge</strong> - The opposite of charge, when the battery is discharging.</li>
<li><strong>Exporting</strong> - When your battery is force discharging to create an export, in Predbat this refers to force export.</li>
<li><strong>Export Limit</strong> - When your battery is being force exported the export limit is the % battery level where the discharge will stop if reached.</li>
<li><strong>PV</strong> - Solar power that is generated in your home. Can also refer to a prediction of the solar for the day, by default is the 50% scenario (most likely generation).</li>
<li><strong>Inverter</strong> - The box that converts DC energy from solar or your battery into AC power for your home and the grid.
The inverter also converts AC power from the grid into DC to charge a battery.</li>
<li><strong>Hybrid inverter</strong> - An inverter that can charge a battery from solar directly using DC power as well as charging it from AC power from the grid</li>
<li><strong>AC Coupled</strong> - A battery that comes with its own inverter and is always charged or discharged with AC (using an internal inverter)</li>
<li><strong>Micro Inverters</strong> - Small inverters that are fitted in line with the DC solar panels and produce AC power on a per-panel basis. Typically used with an AC-coupled battery.</li>
<li><strong>Slot</strong> - A period of time where Predbat acts e.g. charging. In Predbat everything is a multiple of 5 minutes<ul>
<li>Charge slots are always in multiples of the <a href="../energy-rates/#plan-interval">plan interval duration</a>, default is 30 minutes, and align to the interval time boundaries to match the way energy rates are allocated</li>
<li>Discharge slots can be any multiple of 5 minutes and always finish on a plan interval (default 30-minute) boundary.</li>
</ul>
</li>
<li><strong>Low-rate slot</strong> - A time period where the import rate is below a threshold, making it suitable for charging.
By default Predbat automatically calculates this threshold based on future import rates.
You can adjust the threshold using <strong>input_number.predbat_rate_low_threshold</strong> (<em>expert mode</em>) - see <a href="../customisation/#battery-margins-and-metrics-options">Battery margins and metrics options</a>.</li>
<li><strong>High-rate slot</strong> - A time period where the export rate is above a threshold, making it suitable for forced export.
By default Predbat automatically calculates this threshold based on future export rates.
You can adjust the threshold using <strong>input_number.predbat_rate_high_threshold</strong> (<em>expert mode</em>) - see <a href="../customisation/#battery-margins-and-metrics-options">Battery margins and metrics options</a>.</li>
<li>
<p><strong>Loss</strong> - Refers to energy lost in your system due to heat or other factors.</p>
</li>
<li>
<p><strong>PV10</strong> - A prediction of the 10% scenario for solar, this is like a worst case, occurs 1 in 10 days</p>
</li>
<li><strong>PV90</strong> - A prediction of the 90% scenario for solar, this is like a best case, occurs 1 in 10 days</li>
<li><strong>Base</strong> - Usually refers to the expected outcome if Predbat takes no further action, meaning just what is currently configured on your inverter.</li>
<li><strong>Best</strong> - The best plan that Predbat could come up with, as in what it will do (assuming Read-only is off)</li>
<li><strong>Actual</strong> - Used to refer to what has already happened in the past.</li>
<li><strong>Base10</strong> - The base scenario but with the 10% outcome for Solar and Load (worst case)</li>
<li><strong>Charge Limit Base</strong> - This is the target charge % in the Base plan (what is currently set on your inverter)</li>
<li><strong>Best10</strong> - The best plan but with the 10% outcome for Solar and Load (worst case)</li>
<li><strong>Charge Limit Best</strong> - This is the target charge % in the Best plan (what is currently set on your inverter)</li>
<li><strong>Export Limit Best</strong> - This is the target to force export to in % in the Best plan.</li>
<li><strong>Best SoC Keep</strong> - The amount of battery you want to keep in the plan that Predbat has made</li>
</ul>
<h3 id="predbat-modes">Predbat modes</h3>
<p>When you first install Predbat it will be in 'Monitor' mode.</p>
<p>You can configure Predbat's mode of operation using the drop-down menu in <strong>select.predbat_mode</strong>.
You will find a full description of <a href="../customisation/#predbat-mode">Predbat Modes</a> in the Customisation Guide.</p>
<p>Once you are ready for Predbat to take control move this setting to one of the active control modes.</p>
<h3 id="predbat-status">Predbat status</h3>
<p>The current Predbat status is reported in the Home Assistant entity <strong>predbat.status</strong>:</p>
<ul>
<li>
<p><strong>Demand</strong> - This is the default, the load will be covered by solar and/or battery. Excess solar will charge the battery or be
exported if the battery is full. This is described as 'Eco' Mode for GivEnergy inverters but other inverters use different terminology.</p>
</li>
<li>
<p><strong>Demand (Holiday)</strong> - Predbat is in Demand mode, and additionally <a href="../customisation/#holiday-mode">Holiday Mode</a> is active.</p>
</li>
<li>
<p><strong>Charging</strong> - The battery charges from the grid and the grid also covers any load. Solar power will also be used to charge the battery.</p>
</li>
<li>
<p><strong>Freeze charging</strong> - The battery is charging but the current battery level (SoC) is frozen (held). Think of it as a charge to the current battery level.
The grid or solar covers any house load. If there is a shortfall of Solar power to meet house load, the excess house load is met from grid import,
but if there is excess Solar power above the house load, the excess solar will be used to charge the battery,</p>
</li>
<li>
<p><strong>Hold charging</strong> - A type of charge where the target SoC % is the same or lower than the current SoC %. This is similar to charge freeze, but it is selected as a result of planning, and cannot be manually selected.</p>
</li>
<li>
<p><strong>No Charge</strong> - A charge where the target SoC % is lower than the current battery SoC level so there will be no charging unless the usage is unexpectedly high.</p>
</li>
<li>
<p><strong>Exporting</strong> - The battery is being force-discharged. The house load will be covered by the battery and any excess is exported to the grid. Any solar generated will be exported.</p>
</li>
<li>
<p><strong>Freeze exporting</strong> - The battery is in demand mode, but with charging disabled.
The battery or solar covers the house load. As charging is disabled, if there is excess solar generated, the current SoC level will be held and the excess solar will be exported.
If there is a shortfall of generated solar power to meet the house load, the battery will discharge to meet the extra load.</p>
</li>
<li>
<p><strong>Demand [Freeze exporting]</strong> - Predbat's Demand mode has been overridden and Predbat is set to Freeze exporting mode.  See <a href="../customisation/#freeze-export-during-demand">Freeze Export during Demand</a>.</p>
</li>
<li>
<p><strong>Hold exporting</strong> - The plan was to force export but the minimum battery level was reached and thus the battery is kept in Demand mode.
If the battery level again gets above the threshold it will be changed back to Export mode.</p>
</li>
<li>
<p><strong>Hold for car</strong> and <strong>Demand, Hold for car</strong> - A car is charging (either Predbat-led or Octopus-led), the battery is in Demand mode,
but is set to prevent discharging into the car (requires <strong>switch.predbat_car_charging_from_battery</strong> to be set to On).</p>
</li>
<li>
<p><strong>Hold for iBoost</strong> and <strong>Demand, Hold for iBoost</strong> - iBoost is active, the battery is in Demand mode, but is set to prevent discharging into the iBoost (requires <strong>switch.predbat_iboost_prevent_discharge</strong> to be set to On).</p>
</li>
<li>
<p><strong>Read-Only</strong> - Predbat is in <a href="../customisation/#manual-control">read-only mode</a>, the plan will be produced and updated but no instructions will be sent to the inverter to charge or discharge.</p>
</li>
<li>
<p><strong>Read-Only (Axle)</strong> - Predbat is in <a href="../energy-rates/#axle-vpp">read-only mode for the duration of an Axle VPP export event</a>, and will automatically return to a normal execution mode at the end of the Axle event.</p>
</li>
<li>
<p><strong>[Alert]</strong> will be appended to the Predbat status if an <a href="../apps-yaml/#weather-alert-system">Alert is active</a>.</p>
</li>
<li>
<p><strong>Calibration</strong> - The inverter is calibrating the batteries.
On GivEnergy systems the battery state of charge (SoC) level has to be calibrated by performing a full battery discharge and then a full charge
so that the voltage levels associated with empty and full SoC can be determined.
Predbat will pause executing the plan until the calibration automatically finishes - see <a href="../faq/#warn-inverter-is-in-calibration-mode">Calibration FAQ</a>.</p>
</li>
<li>
<p><strong>Error</strong> - If there is a configuration error or other problem, you should check the <a href="../output-data/#predbat-logfile">Predbat log file</a> for more details.</p>
</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href=".." class="btn btn-neutral float-left" title="Introduction"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../caution/" class="btn btn-neutral float-right" title="Words of caution">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href=".." style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../caution/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
